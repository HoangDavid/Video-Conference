syntax="proto3";

package SFU;

option go_package="api/proto/";

enum SdpType {
    SDP_TYPE_UNSPECIFIED = 0;
    OFFER = 1;
    ANSWER = 2;
}

// Session Description (SDP)
message SDP {
    SdpType type = 1;
    string sdp = 2;
}

message IceCandidate {
    string candidate = 1;
    string sdp_mid = 2;
    uint32 sdp_mline_index = 3;
    string username_fragment = 4;
}

// TODO: mute A/V, join/leave, etc

message PeerSignal {
  oneof payload {
    SDP sdp = 1;
    IceCandidate       ice = 2;
  }
}


service SFU {
    rpc Signal(stream PeerSignal) returns (stream PeerSignal);
}